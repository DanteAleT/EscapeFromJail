const marco=document.getElementById('marco');const game=document.getElementById('game');const hitbox=document.getElementById('hitbox');const guardia=document.getElementById('guardia');const progress=document.getElementById('progress');const timer=document.getElementById('timer');const escape=document.getElementById('escape');let isToggled=!1;let intervalo=null;let perdio=!1;let ancho=0;game.addEventListener('mousedown',()=>{marco.classList.add('marcoTaladro');isToggled=!0;setTimeout(()=>{marco.classList.remove('marcoTaladro');if(isToggled){marco.classList.add('taladroDos')}},1000)});game.addEventListener('mouseup',()=>{if(isToggled){marco.classList.remove('marcoTaladro','taladroDos')}isToggled=!1});function marcoAsus(){setInterval(()=>{let rect1=guardia.getBoundingClientRect();let rect2=hitbox.getBoundingClientRect();if(rect1.x<rect2.x+rect2.width&&rect1.x+rect1.width>rect2.x&&isToggled){perdio=!0;guardia.classList.remove('guardia');guardia.classList.add('descubierto');marco.classList.remove('marcoTaladro','taladroDos');marco.classList.add('marcoAsustado')}},10)}marcoAsus();game.addEventListener('mousedown',()=>{intervalo=setInterval(()=>{const width=parseInt(progress.style.width)||0;progress.style.width=(width+3)+'%';ancho+=3},1000);if(perdio){progress.remove('progress')}else if(ancho>=100){guardia.classList.remove('guardia');guardia.classList.remove('descubierto')}});game.addEventListener('mouseup',()=>{clearInterval(intervalo)});function iniciarTemporizador(){let segundos=120;let intervalo=setInterval(()=>{let minutos=Math.floor(segundos/60);let segundosRestantes=segundos%60;let tiempoRestante=minutos+":"+(segundosRestantes<10?"0":"")+segundosRestantes;document.getElementById('timer').textContent=tiempoRestante;segundos--;if(segundos<0){perdio=!0;clearInterval(intervalo);guardia.classList.remove('guardia');guardia.classList.add('descubierto');marco.classList.remove('marcoTaladro','taladroDos');marco.classList.add('marcoAsustado')}else if(perdio){segundos=0}else if(ancho>=100){clearInterval(intervalo);marco.classList.add('win');guardia.classList.remove('guardia');guardia.classList.remove('descubierto');escape.classList.add('escape')}},1000)}document.addEventListener("DOMContentLoaded",()=>{iniciarTemporizador()});